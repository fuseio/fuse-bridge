FROM node:10

ENV NODE_ENV=production

ENV BRIDGE_MODE=NATIVE_TO_ERC

ENV ALLOW_HTTP=no

ENV HOME_POLLING_INTERVAL=5000
ENV FOREIGN_POLLING_INTERVAL=5000

ENV CONSENSUS_ADDRESS=0x3014ca10b91cb3D0AD85fEf7A3Cb95BCAc9c0f79
ENV BLOCK_REWARD_ADDRESS=0x63D4efeD2e3dA070247bea3073BCaB896dFF6C9B

ENV HOME_DEFAULT_GAS_PRICE=1000000000

ENV FOREIGN_GAS_PRICE_ORACLE_URL=https://ethgasstation.info/json/ethgasAPI.json
ENV FOREIGN_GAS_PRICE_ORACLE_SECONDARY_URL=https://s3.eu-central-1.amazonaws.com/ethgasstation.fuse.io/json/ethgasAPI.json
ENV FOREIGN_GAS_PRICE_SPEED_TYPE=average
ENV FOREIGN_GAS_PRICE_FACTOR=0.1
ENV FOREIGN_GAS_PRICE_UPDATE_INTERVAL=600000
ENV FOREIGN_DEFAULT_GAS_PRICE=50000000000

ENV QUEUE_URL=amqp://rabbit
ENV REDIS_URL=redis://redis

ENV REDIS_LOCK_TTL=1000

ENV LOG_LEVEL=info
ENV MAX_PROCESSING_TIME=20000

WORKDIR /bridge-oracle

COPY . .
RUN npm install

CMD npm run $NPM_SCRIPT